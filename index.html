<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Firebase Connection Test (jsDelivr)</title>
    <style>
        body { font-family: sans-serif; background-color: #121212; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        #status { font-size: 24px; padding: 40px; border-radius: 10px; text-align: center; }
        .connecting { background-color: #333; border: 2px solid #ffc107; }
        .success { background-color: #28a745; border: 2px solid #1f8136; }
        .error { background-color: #dc3545; border: 2px solid #a71d2a; }
    </style>
</head>
<body>

    <div id="status" class="connecting">
        <h1>جاري محاولة الاتصال بـ Firebase... (عبر jsDelivr)</h1>
    </div>

    <!-- *** التغيير الأهم: تحميل Firebase من jsDelivr بدلاً من gstatic *** -->
    <script src="https://cdn.jsdelivr.net/npm/firebase@10.7.1/firebase-app.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/firebase@10.7.1/firebase-auth.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/firebase@10.7.1/firebase-firestore.min.js"></script>

    <script>
        // الكود المتبقي يبقى كما هو تماماً
        const firebaseConfig = {
            apiKey: "AIzaSyD5YAKC8KO5jKHQdsdrA8Bm-ERD6yUdHBQ",
            authDomain: "tele-follow.firebaseapp.com",
            projectId: "tele-follow",
            storageBucket: "tele-follow.firebasestorage.app",
            messagingSenderId: "311701431089",
            appId: "1:311701431089:web:fcba431dcae893a87cc610"
        };

        const statusDiv = document.getElementById('status' );

        try {
            // ملاحظة: الدوال الآن موجودة مباشرة في الكائن firebase
            const app = firebase.initializeApp(firebaseConfig);
            const auth = firebase.getAuth(app);

            firebase.signInAnonymously(auth)
                .then((userCredential) => {
                    statusDiv.className = 'success';
                    statusDiv.innerHTML = `<h1>✅ نجح الاتصال!</h1><p>تم تسجيل الدخول بنجاح عبر jsDelivr.</p>`;
                })
                .catch((error) => {
                    statusDiv.className = 'error';
                    statusDiv.innerHTML = `<h1>❌ فشل تسجيل الدخول</h1><p>${error.message}</p>`;
                });

        } catch (error) {
            statusDiv.className = 'error';
            statusDiv.innerHTML = `<h1>❌ فشل تهيئة Firebase</h1><p>${error.message}</p>`;
        }
    </script>

</body>
</html>
