<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Task Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loader-overlay" class="loader-overlay"><div class="loader-spinner"></div></div>

    <div class="app-container">
        <!-- ================= HOME PAGE ================= -->
        <div class="page active" id="home-page">
            <div class="main-content">
                <div class="header">
                    <div class="user-info">
                        <img id="user-avatar" class="avatar" src="" alt="Avatar">
                        <span id="username"></span>
                    </div>
                    <div class="icon-box" id="daily-reward-icon"><i class="ri-gift-line"></i></div>
                </div>
                <div class="dashboard-hero">
                    <p>ุฑุตูุฏ ุงูููุงุท</p>
                    <div class="balance-display">
                        <img src="https://raw.githubusercontent.com/twitter/twemoji/master/assets/svg/1fa99.svg" alt="coin" class="coin-icon"/>
                        <h1 id="local-coin"></h1>
                    </div>
                    <div class="usdt-balance-display">
                        ุฑุตูุฏ ุงูุฏููุงุฑ: $<span id="home-usdt-balance"></span>
                    </div>
                </div>
                <div class="quick-actions">
                    <div class="action-card" data-page="earn-page"><i class="ri-copper-coin-line"></i><span>ุงูุณุจ ุงูููุงุท</span></div>
                    <div class="action-card" data-page="friends-page"><i class="ri-group-line"></i><span>ุงุฏุนู ุงูุฃุตุฏูุงุก</span></div>
                    <div class="action-card" data-page="exchange-page"><i class="ri-exchange-dollar-line"></i><span>ุชุญููู ูุณุญุจ</span></div>
                </div>
            </div>
        </div>

        <!-- ================= REWARDS PAGE (Formerly Mine Page ) ================= -->
        <div class="page" id="mine-page">
            <div class="page-header"><h3>ุงูููุงูุขุช</h3></div>
            <div class="content-container">
                <div class="card">
                    <div class="reward-card-content">
                        <i class="ri-time-line"></i>
                        <div>
                            <h4>ููุงูุฃุฉ ูู ุณุงุนุฉ</h4>
                            <p>ุงุญุตู ุนูู 100 ููุทุฉ ูู ุณุงุนุฉ ูุฌุงูุงู.</p>
                        </div>
                    </div>
                    <button id="claim-hourly-btn" class="btn-submit" disabled>ุฌุงุฑู ุงูุชุญููู...</button>
                </div>
                <div class="card">
                    <div class="reward-card-content">
                        <i class="ri-coupon-3-line"></i>
                        <div>
                            <h4>ููุฏ ุงููุฏูุฉ</h4>
                            <p>ุฃุฏุฎู ุงูููุฏ ุงูุฐู ุญุตูุช ุนููู ูู ุงูููุงุฉ.</p>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 16px;">
                        <input type="text" id="gift-code-input" placeholder="XXXX-XXXX">
                    </div>
                    <button class="btn-submit" id="redeem-gift-code-btn">ุชูุนูู ุงูููุฏ</button>
                </div>
            </div>
        </div>

        <!-- ================= EXCHANGE PAGE ================= -->
        <div class="page" id="exchange-page">
            <div class="page-header"><h3>ุชุญููู ูุณุญุจ</h3></div>
            <div class="content-container">
                <div class="card">
                    <h4>ุฑุตูุฏู ุงูุญุงูู</h4>
                    <div class="balance-summary">
                        <div><i class="ri-copper-coin-fill"></i> ุงูููุงุท: <strong id="points-balance"></strong></div>
                        <div><i class="ri-money-dollar-circle-fill"></i> USDT: <strong id="usdt-balance"></strong></div>
                    </div>
                </div>
                <div class="card">
                    <h4>ุชุญููู ุงูููุงุท ุฅูู USDT</h4>
                    <p>ุณุนุฑ ุงูุตุฑู ุงูุญุงูู: <strong class="highlight" id="exchange-rate-info"></strong></p>
                    <div class="form-group">
                        <label for="points-to-convert">ุงูููุงุท ุงููุฑุงุฏ ุชุญููููุง</label>
                        <input type="number" id="points-to-convert" placeholder="ุฃุฏุฎู ุนุฏุฏ ุงูููุงุท">
                    </div>
                    <button class="btn-submit" id="convert-points-btn">ุชุญููู</button>
                </div>
                <div class="card">
                    <h4>ุณุญุจ ุงูุฃุฑุจุงุญ (USDT)</h4>
                    <div class="form-group"><label for="wallet">ุนููุงู ุงููุญูุธุฉ (USDT TRC20)</label><input type="text" id="wallet" placeholder="ุฃุฏุฎู ุนููุงู ูุญูุธุชู"></div>
                    <div class="form-group"><label for="amount">ุงููุจูุบ (USDT)</label><input type="number" id="amount" placeholder="ุงูุญุฏ ุงูุฃุฏูู 10"></div>
                    <button class="btn-submit" id="withdraw-btn">ุฅุฑุณุงู ุทูุจ ุงูุณุญุจ</button>
                </div>
            </div>
        </div>
        
        <!-- ================= OTHER PAGES ================= -->
        <div class="page" id="earn-page"><div class="page-header"><h3>ุงูุณุจ ุงูููุงุท</h3></div><div class="content-container"><div id="urgent-tasks-section"><h4>๐ฅ ููุงู ุนุงุฌูุฉ</h4><div id="urgent-tasks-container"></div></div><div id="regular-tasks-section"><h4>ุงูููุงู ุงูููููุฉ</h4><div id="tasks-list-container"></div></div></div></div>
        <div class="page" id="friends-page"><div class="page-header"><h3>ุฏุนูุฉ ุงูุฃุตุฏูุงุก</h3></div><div class="content-container"><div class="card"><h4>ุงุฏุนู ุฃุตุฏูุงุกู ูุงุฑุจุญ!</h4><p>ููู ุตุฏูู ููุถู ุนุจุฑ ุฑุงุจุทูุ ุณุชุญุตู ุนูู ููุงูุฃุฉ ูุฏุฑูุง <strong class="highlight">5000</strong> ููุทุฉ.</p><button class="btn-submit invite-btn"><i class="ri-share-forward-line"></i> ูุดุงุฑูุฉ ุฑุงุจุท ุงูุฏุนูุฉ</button></div><div class="card"><h4>ุฅุญุงูุงุชู</h4><p>ููุฏ ููุช ุจุฏุนูุฉ <strong id="referral-count" class="highlight">0</strong> ุฃุตุฏูุงุก.</p></div></div></div>

        <!-- ================= MODALS ================= -->
        <div id="daily-reward-modal" class="modal-overlay"><div class="modal-content"><i class="ri-close-line modal-close-btn"></i><div class="modal-icon-wrapper"><i class="ri-gift-2-fill"></i></div><h3>ุงูููุงูุฃุฉ ุงูููููุฉ</h3><p>ุณุฌู ุญุถูุฑู ููููุงู ูุชุฑุจุญ ููุงูุขุช ูููุฉ.</p><div class="reward-status"><div class="streak-info"><i class="ri-calendar-check-line"></i><span><span id="streak-days">0</span> ุฃูุงู</span></div><div id="reward-countdown">โณ ...</div></div><button id="claim-reward-btn" class="btn-submit" disabled>ุงููุทุงูุจุฉ ุจุงูููุงูุฃุฉ</button></div></div>
        <div id="alert-modal" class="modal-overlay"><div class="modal-content"><div id="alert-icon" class="modal-icon-wrapper"></div><p id="alert-message"></p><button id="alert-close-btn" class="btn-submit">ุญุณูุงู</button></div></div>
        
        <!-- ================= NAVIGATION ================= -->
        <nav class="bottom-nav">
            <a href="#" class="nav-link" data-page="exchange-page"><i class="ri-exchange-dollar-line"></i><span>ุชุญููู</span></a>
            <!-- **FIXED: Added the missing icon and corrected the text** -->
            <a href="#" class="nav-link" data-page="mine-page"><i class="ri-gift-line"></i><span>ุงูููุงูุขุช</span></a>
            <a href="#" class="nav-link active" data-page="home-page"><i class="ri-home-4-fill"></i><span>ุงูุฑุฆูุณูุฉ</span></a>
            <a href="#" class="nav-link" data-page="friends-page"><i class="ri-group-line"></i><span>ุงูุฃุตุฏูุงุก</span></a>
            <a href="#" class="nav-link" data-page="earn-page"><i class="ri-copper-coin-line"></i><span>ุงูุณุจ</span></a>
        </nav>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="app.js"></script>
</body>
</html>
